p8105_hw3_yw3996
================
Yiying Wu

## 1. Instacart data

load the data from the p8105.datasets using:

``` r
library(p8105.datasets)
data("instacart")
instacart=instacart
```

Description of the dataset:

-   This dataset contains 1384617 rows and 15 columns, with each row
    resprenting a single product from an instacart order.

-   Variables include

    -   `order_id`: order identifier
    -   `product_id`: product identifier
    -   `add_to_cart_order`: order in which each product was added to
        cart
    -   `reordered`: 1 if this prodcut has been ordered by this user in
        the past, 0 otherwise
    -   `user_id`: customer identifier
    -   `eval_set`: which evaluation set this order belongs in (Note
        that the data for use in this class is exclusively from the
        “train” eval_set)
    -   `order_number`: the order sequence number for this user
        (1=first, n=nth)
    -   `order_dow`: the day of the week on which the order was placed
    -   `order_hour_of_day`: the hour of the day on which the order was
        placed
    -   `days_since_prior_order`: days since the last order, capped at
        30, NA if order_number=1
    -   `product_name`: name of the product
    -   `aisle_id`: aisle identifier
    -   `department_id`: department identifier
    -   `aisle`: the name of the aisle
    -   `department`: the name of the department

### Count the number of aisles and the aisles with most items ordered

Count the number of aisles in the dataset:

``` r
n_distinct(instacart$aisle)
```

    ## [1] 134

Count the number of orders in each aisle and sort by descending order:

``` r
instacart |>
  group_by(aisle) |>
  summarize(n_obs = n())|>
  arrange(desc(n_obs))
```

    ## # A tibble: 134 × 2
    ##    aisle                          n_obs
    ##    <chr>                          <int>
    ##  1 fresh vegetables              150609
    ##  2 fresh fruits                  150473
    ##  3 packaged vegetables fruits     78493
    ##  4 yogurt                         55240
    ##  5 packaged cheese                41699
    ##  6 water seltzer sparkling water  36617
    ##  7 milk                           32644
    ##  8 chips pretzels                 31269
    ##  9 soy lactosefree                26240
    ## 10 bread                          23635
    ## # ℹ 124 more rows

Therefore, there are 134 aisles. The most items are ordered from fresh
vegetables aisles.

### Plot: the number of items ordered in each aisle (aisles with more than 10000 items ordered)

``` r
instacart |>
  group_by(aisle) |>
  summarize(n_obs = n()) |>
  filter(n_obs > 10000) |>
  mutate(aisle = fct_reorder(aisle, desc(n_obs))) |>
  ggplot(aes(x = aisle, y = n_obs)) + 
  geom_bar(stat = "identity") +  # Use geom_bar for a bar chart
  labs(title = "Number of items ordered in each aisle") +
  theme(axis.text.x = element_text(angle = 60, hjust = 1))
```

<img src="p8105_hw3_yw3996_files/figure-gfm/unnamed-chunk-4-1.png" width="90%" />
